<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rounak Saha | ML Engineer & Developer</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    
    <script async src="https://unpkg.com/es-module-shims@1.6.3/dist/es-module-shims.js"></script>
    <script type="importmap">
    {
        "imports": {
            "three": "https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.module.js",
            "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.158.0/examples/jsm/"
        }
    }
    </script>

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #020617; color: #cbd5e1; overflow-x: hidden; }
        .cursor-dot { width: 8px; height: 8px; background-color: #fbbf24; border-radius: 50%; position: fixed; z-index: 9999; pointer-events: none; transition: transform 0.1s ease-out; transform: translate(-50%, -50%); }
        .cursor-outline { width: 40px; height: 40px; border: 2px solid #fbbf24; border-radius: 50%; position: fixed; z-index: 9999; pointer-events: none; transition: all 0.2s ease-out; transform: translate(-50%, -50%); }
        .glass-card { background: rgba(15, 23, 42, 0.5); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); border: 1px solid rgba(51, 65, 85, 0.5); border-radius: 1rem; }
        .aurora-background { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; overflow: hidden; }
        .aurora-shape1 { position: absolute; height: 300px; width: 300px; background: radial-gradient(circle, rgba(236, 72, 153, 0.3) 0%, rgba(236, 72, 153, 0) 70%); border-radius: 50%; top: 10vh; left: 10vw; animation: move-aurora1 20s infinite alternate ease-in-out; }
        .aurora-shape2 { position: absolute; height: 400px; width: 400px; background: radial-gradient(circle, rgba(245, 158, 11, 0.3) 0%, rgba(245, 158, 11, 0) 70%); border-radius: 50%; bottom: 5vh; right: 15vw; animation: move-aurora2 25s infinite alternate ease-in-out; }
        @keyframes move-aurora1 { from { transform: translate(0, 0) rotate(0deg); } to { transform: translate(100px, 50px) rotate(45deg); } }
        @keyframes move-aurora2 { from { transform: translate(0, 0) rotate(0deg); } to { transform: translate(-100px, -50px) rotate(-60deg); } }
        .section { opacity: 0; transform: translateY(30px); transition: opacity 0.8s ease-out, transform 0.8s ease-out; }
        .section.visible { opacity: 1; transform: translateY(0); }
        .modal-overlay { transition: opacity 0.3s ease; }
        .modal-content { transition: transform 0.3s ease, opacity 0.3s ease; }
        .tagcloud { font-family: 'Inter', sans-serif; font-size: 16px; font-weight: 600; }
        .tagcloud--item { padding: 2px 8px; color: #cbd5e1; text-decoration: none; }
        .tagcloud--item:hover { color: #fbbf24; }
        .skill-bar-bg { background-color: #1e293b; }
        .skill-bar-fill { transition: width 1.5s cubic-bezier(0.25, 1, 0.5, 1); }
        .swiper-container { width: 100%; padding-top: 50px; padding-bottom: 50px; }
        .swiper-slide { background-position: center; background-size: cover; width: 400px; height: 500px; }
        .swiper-slide .project-content { opacity: 0; transition: opacity 0.5s ease; }
        .swiper-slide-active .project-content { opacity: 1; }
    </style>
</head>
<body class="w-full">
    <!-- Safer data passing -->
    <div id="skills-data" data-skills='{{ skills | tojson | safe }}' class="hidden"></div>
    <div id="projects-data" data-projects='{{ projects | tojson | safe }}' class="hidden"></div>

    <!-- Custom Cursor -->
    <div class="cursor-dot"></div>
    <div class="cursor-outline"></div>

    <!-- Background Effects -->
    <div id="canvas-container" class="fixed top-0 left-0 w-full h-full z-[-1]"></div>
    <div class="aurora-background">
        <div class="aurora-shape1"></div>
        <div class="aurora-shape2"></div>
    </div>
    
    <!-- Header -->
    <header id="header" class="fixed top-0 left-0 right-0 z-50 transition-all duration-300">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center glass-card mt-4">
            <a href="#" class="text-2xl font-bold text-white">Rounak Saha</a>
            <div class="hidden md:flex items-center space-x-8">
                <a href="#about" class="text-slate-300 hover:text-amber-400 transition-colors">About</a>
                <a href="#experience" class="text-slate-300 hover:text-amber-400 transition-colors">Experience</a>
                <a href="#projects" class="text-slate-300 hover:text-amber-400 transition-colors">Projects</a>
                <a href="#contact" class="text-slate-300 hover:text-amber-400 transition-colors">Contact</a>
            </div>
            <a href="static/Rounak_Resume_N5.pdf" target="_blank" class="hidden md:block bg-amber-500 hover:bg-amber-600 text-white font-semibold px-4 py-2 rounded-lg transition-colors">
                View Resume
            </a>
        </nav>
    </header>

    <main class="container mx-auto px-6">
        {% include '_hero.html' %}
        {% include '_about.html' %}
        {% include '_education.html' %}
        {% include '_experience.html' %}
        {% include '_skills.html' %}
        {% include '_projects.html' %}
        {% include '_awards.html' %}
        {% include '_contact.html' %}
    </main>

    <!-- Footer -->
    <footer class="py-10 border-t border-slate-800">
        <div class="container mx-auto px-6 text-center text-slate-500">
            <div class="flex justify-center gap-6 mb-6">
                <a href="https://github.com/RSaha0507" target="_blank" rel="noopener noreferrer" class="text-2xl hover:text-amber-400 transition-colors"><i class="fab fa-github"></i></a>
                <a href="https://linkedin.com/in/rounak-saha-932ab0253" target="_blank" rel="noopener noreferrer" class="text-2xl hover:text-amber-400 transition-colors"><i class="fab fa-linkedin"></i></a>
            </div>
            <p>Designed & Built by Rounak Saha</p>
        </div>
    </footer>
    
    <!-- Project Modal (included in _projects.html) -->
    
    <!-- TagCloud Script -->
    <script src="https://cdn.jsdelivr.net/npm/tagcloud@2.2.0/dist/TagCloud.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script type="module">
        import * as THREE from 'three';

        // --- Read data safely from the DOM ---
        const skillsDataEl = document.getElementById('skills-data');
        const skills = JSON.parse(skillsDataEl.dataset.skills);

        const projectsDataEl = document.getElementById('projects-data');
        const projects = JSON.parse(projectsDataEl.dataset.projects);

        // --- Intersection Observer for animations ---
        const sectionObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    // Animate skill bars when they become visible
                    if (entry.target.id === 'skills') {
                        const skillBars = entry.target.querySelectorAll('.skill-bar-fill');
                        skillBars.forEach(bar => {
                            bar.style.width = bar.dataset.proficiency + '%';
                        });
                    }
                    sectionObserver.unobserve(entry.target);
                }
            });
        }, { threshold: 0.1 });
        document.querySelectorAll('.section').forEach(section => { sectionObserver.observe(section); });

        // --- Skills Tab Logic ---
        const skillTabs = document.querySelectorAll('[data-tab-target]');
        const skillTabContents = document.querySelectorAll('[data-tab-content]');
        skillTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const target = document.querySelector(tab.dataset.tabTarget);
                skillTabContents.forEach(tabContent => tabContent.classList.add('hidden'));
                skillTabs.forEach(t => t.classList.remove('bg-amber-500', 'text-white'));
                tab.classList.add('bg-amber-500', 'text-white');
                target.classList.remove('hidden');
            });
        });

        // --- 3D Project Carousel (Swiper.js) ---
        const swiper = new Swiper('.swiper-container', {
            effect: 'coverflow',
            grabCursor: true,
            centeredSlides: true,
            slidesPerView: 'auto',
            loop: true,
            coverflowEffect: {
                rotate: 50,
                stretch: 0,
                depth: 100,
                modifier: 1,
                slideShadows: true,
            },
            pagination: {
                el: '.swiper-pagination',
            },
            navigation: {
                nextEl: '.swiper-button-next',
                prevEl: '.swiper-button-prev',
            },
        });

        // --- 3D Background ---
        let camera, scene, renderer, stars;
        function init3D() {
            const container = document.getElementById('canvas-container');
            if (!container) return;
            camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 1, 1000);
            camera.position.z = 1; camera.rotation.x = Math.PI / 2;
            scene = new THREE.Scene();
            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            container.appendChild(renderer.domElement);
            const starGeo = new THREE.BufferGeometry();
            const starVertices = [];
            for (let i = 0; i < 6000; i++) {
                starVertices.push((Math.random() - 0.5) * 2000, (Math.random() - 0.5) * 2000, (Math.random() - 0.5) * 2000);
            }
            starGeo.setAttribute('position', new THREE.Float32BufferAttribute(starVertices, 3));
            let sprite = new THREE.TextureLoader().load( 'https://placehold.co/16x16/ffffff/ffffff.png' );
            let starMaterial = new THREE.PointsMaterial({ color: 0xaaaaaa, size: 0.7, map: sprite });
            stars = new THREE.Points(starGeo, starMaterial);
            scene.add(stars);
            window.addEventListener('resize', onWindowResize, false);
            animate3D();
        }
        function onWindowResize() { camera.aspect = window.innerWidth / window.innerHeight; camera.updateProjectionMatrix(); renderer.setSize(window.innerWidth, window.innerHeight); }
        function animate3D() { stars.rotation.y += 0.0001; renderer.render(scene, camera); requestAnimationFrame(animate3D); }
        init3D();

        // --- Custom Cursor ---
        const cursorDot = document.querySelector(".cursor-dot");
        const cursorOutline = document.querySelector(".cursor-outline");
        window.addEventListener("mousemove", function (e) {
            cursorDot.style.left = `${e.clientX}px`; cursorDot.style.top = `${e.clientY}px`;
            cursorOutline.style.left = `${e.clientX}px`; cursorOutline.style.top = `${e.clientY}px`;
        });
        document.querySelectorAll('a, button, .project-card').forEach(el => {
            el.addEventListener('mouseover', () => { cursorOutline.style.transform = 'translate(-50%, -50%) scale(1.5)'; cursorOutline.style.borderColor = '#f59e0b'; });
            el.addEventListener('mouseout', () => { cursorOutline.style.transform = 'translate(-50%, -50%) scale(1)'; cursorOutline.style.borderColor = '#fbbf24'; });
        });

        // --- Scroll Animations ---
        const sections = document.querySelectorAll('.section');
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => { if (entry.isIntersecting) { entry.target.classList.add('visible'); observer.unobserve(entry.target); } });
        }, { threshold: 0.1 });
        sections.forEach(section => { observer.observe(section); });
        
        // --- Skill Sphere ---
        const tc = TagCloud('#skill-sphere', skills, {
            radius: Math.min(600, window.innerWidth, 500) / 2 - 50,
            maxSpeed: 'fast', initSpeed: 'fast', direction: 135, keep: true,
        });

        // --- Project Modal Logic ---
        const projectCards = document.querySelectorAll('.project-card');
        const modal = document.getElementById('project-modal');
        const modalContent = document.getElementById('modal-content');
        const closeModalBtn = document.getElementById('close-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalTech = document.getElementById('modal-tech');
        const modalDescription = document.getElementById('modal-description');
        const modalGithub = document.getElementById('modal-github');
        const modalLive = document.getElementById('modal-live');

        projectCards.forEach(card => {
            card.addEventListener('click', () => {
                const projectIndex = card.dataset.index;
                const projectData = projects[projectIndex];
                modalTitle.textContent = projectData.title;
                modalDescription.textContent = projectData.description;
                modalGithub.href = projectData.github;
                if (projectData.live_link && projectData.live_link !== "#") {
                    modalLive.href = projectData.live_link;
                    modalLive.style.display = 'flex';
                } else {
                    modalLive.style.display = 'none';
                }
                modalTech.innerHTML = '';
                projectData.tech.forEach(tech => {
                    const span = document.createElement('span');
                    span.className = 'bg-slate-700 text-amber-300 text-xs font-semibold px-2.5 py-0.5 rounded-full';
                    span.textContent = tech;
                    modalTech.appendChild(span);
                });
                modal.classList.remove('hidden');
                setTimeout(() => { modal.classList.remove('opacity-0'); modalContent.classList.remove('opacity-0', 'scale-95'); }, 10);
            });
        });
        function closeModal() {
            modalContent.classList.add('opacity-0', 'scale-95');
            modal.classList.add('opacity-0');
            setTimeout(() => { modal.classList.add('hidden'); }, 300);
        }
        closeModalBtn.addEventListener('click', closeModal);
        modal.addEventListener('click', (e) => { if (e.target === modal) { closeModal(); } });
    </script>
</body>
</html>

